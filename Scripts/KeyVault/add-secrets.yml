parameters:
  - name: secretName
    type: string
    default: ""

steps:
  - task: AzurePowerShell@3
    displayName: Set Secret ${{ parameters.secretName }} in KV
    inputs:
      azureSubscription: "$(serviceConnection)"
      ScriptPath: "$(Build.Repository.LocalPath)/$(keyVaultScriptPath)"
      ScriptArguments: '-keyVaultName "$(keyVaultName)" -secretName "${{ parameters.secretName }}" -secretValue "$(${{ parameters.secretName }})"'
      azurePowerShellVersion: LatestVersion
