parameters:
  - name: poolName
    type: string
    default: "tasmumsagents"
  - name: chartsPath
    type: string
    default: "pipelines/deploy/charts"

jobs:
  - job: PublishHelmArtifacts
    pool:
        name: ${{ parameters.poolName }}
    steps:
      - checkout: platform-apis
        clean: true 
        path: TASMU Central Platform/platform-apis

      - checkout: QC-Infra
        clean: true 
        path:  QC-Infra  

      - task: CopyFiles@2
        inputs:
          SourceFolder: ${{ parameters.chartsPath }}
          Contents: "**"
          TargetFolder: "$(build.artifactstagingdirectory)/deploy"
      - task: PublishPipelineArtifact@1
        inputs:
          targetPath: ${{ parameters.chartsPath }}
          artifact: "charts"
          publishLocation: "pipeline"
