{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "networkSecurityGroupName": {
      "value": "nsg-cpd-apps-iase-dev-we-01"
    },
    "networkSecurityGroupSecurityRules": {
      "value": [
        {
          "name": "IntersubnetCommunication",
          "properties": {
            "description": "Intersubnet communication within virtual network",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "*",
            "sourceAddressPrefix": "172.20.54.0/25",
            "destinationAddressPrefix": "172.20.54.0/25",
            "access": "Allow",
            "priority": 100,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "ConnectorDeployment",
          "properties": {
            "description": "Required to deploy and update connectors.",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "454",
            "sourceAddressPrefix": "AzureConnectors",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 200,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "AppServiceManagementDependency",
          "properties": {
            "description": "App Service Management Dependency",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "",
            "sourceAddressPrefix": "AppServiceManagement",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 300,
            "direction": "Inbound",
            "destinationPortRanges": [
              "454",
              "455"
            ],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "CommunicationFromAzureTrafficManager",
          "properties": {
            "description": "Communication from Azure Traffic Manager",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "454",
            "sourceAddressPrefix": "AzureTrafficManager",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 400,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Inbound-LogicApps-Management",
          "properties": {
            "description": "Logic Apps Management",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "454",
            "sourceAddressPrefix": "LogicAppsManagement",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 500,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Inbound-LogicApps",
          "properties": {
            "description": "Logic Apps",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "454",
            "sourceAddressPrefix": "LogicApps",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 600,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Inbound-APIManagement",
          "properties": {
            "description": "API Management",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "3443",
            "sourceAddressPrefix": "APIManagement",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 700,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "IntersubnetCommunicationOutbound",
          "properties": {
            "description": "Intersubnet communication within virtual network",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "*",
            "sourceAddressPrefix": "172.20.54.0/25",
            "destinationAddressPrefix": "172.20.54.0/25",
            "access": "Allow",
            "priority": 100,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "ConnectionManagement",
          "properties": {
            "description": "Connection management",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "443",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "AppService",
            "access": "Allow",
            "priority": 200,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "AzureActiveDirectory",
          "properties": {
            "description": "Azure Active Directory",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "AzureActiveDirectory",
            "access": "Allow",
            "priority": 300,
            "direction": "Outbound",
            "destinationPortRanges": [
              "80",
              "443"
            ],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "AzureStorageDependency",
          "properties": {
            "description": "Azure Storage dependency",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "Storage",
            "access": "Allow",
            "priority": 400,
            "direction": "Outbound",
            "destinationPortRanges": [
              "80",
              "443"
            ],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "PublishDiagnostics",
          "properties": {
            "description": "Publish diagnostic logs & metrics",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "443",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "AzureMonitor",
            "access": "Allow",
            "priority": 500,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "AzureSQLDependency",
          "properties": {
            "description": "Azure SQL dependency",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "1433",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "SQL",
            "access": "Allow",
            "priority": 600,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "AzureResourceHealth",
          "properties": {
            "description": "Azure Resource Health",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "1886",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "AzureMonitor",
            "access": "Allow",
            "priority": 700,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "LogToEventHubPolicy",
          "properties": {
            "description": "Dependency from Log to Event Hub policy and monitoring agent",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "5672",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "EventHub",
            "access": "Allow",
            "priority": 800,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Outbound-Storage-445",
          "properties": {
            "description": "Outbound Storage 445",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "445",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "Storage",
            "access": "Allow",
            "priority": 900,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        }
      ]
    },
    "flowLogsDeloy": {
      "value": true
    },
    "flowLogsEnabled": {
      "value": true
    },
    "flowLogStorageAccountRGName": {
      "value": "rg-cpd-pltf-mon-npd-we-01"
    },
    "flowLogStorageAccountName": {
      "value": "stcpdpltfnsgflnpdwe01"
    },
    "workspaceRGName": {
      "value": "rg-cpd-pltf-mon-npd-we-01"
    },
    "workspaceName": {
      "value": "log-cpd-pltf-npd-we-01"
    },
    "NSGFlowsubscriptionid": {
      "value": "d0694def-b27e-4bb7-900d-437fbeb802da"
    },
    "diagnosticLogsRetentionInDays": {
      "value": 365
    },
    "lockForDeletion": {
      "value": false
    },
    "tags": {
      "value": {
        "Environment": "Development"
      }
    }
  }
}