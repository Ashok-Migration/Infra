{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
  "parameters": {
    "networkSecurityGroupName": {
      "value": "nsg-cpd-apps-iredis-dev-we-01"
    },
    "networkSecurityGroupSecurityRules": {
      "value": [
        {
          "name": "IntersubnetCommunication",
          "properties": {
            "description": "Intersubnet communication within virtual network",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "*",
            "sourceAddressPrefix": "172.20.54.0/25",
            "destinationAddressPrefix": "172.20.54.0/25",
            "access": "Allow",
            "priority": 100,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "AccessAzureCacheForRedis",
          "properties": {
            "description": "For ISE to work with Azure Cache for Redis",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "6379-6383",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 200,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Inbound-LogicApps-Management",
          "properties": {
            "description": "Logic Apps Management",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "454",
            "sourceAddressPrefix": "LogicAppsManagement",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 300,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Inbound-LogicApps",
          "properties": {
            "description": "Logic Apps",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "454",
            "sourceAddressPrefix": "LogicApps",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 400,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Inbound-Azure-Connectors",
          "properties": {
            "description": "Azure Connectors",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "454",
            "sourceAddressPrefix": "AzureConnectors",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 500,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Inbound-AppServiceManagement",
          "properties": {
            "description": "Azure App Service Management",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "",
            "sourceAddressPrefix": "AppServiceManagement",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 600,
            "direction": "Inbound",
            "destinationPortRanges": [
              "454",
              "455"
            ],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Inbound-APIManagement",
          "properties": {
            "description": "Azure API Management",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "3443",
            "sourceAddressPrefix": "APIManagement",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 700,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Inbound-AzureTrafficManager",
          "properties": {
            "description": "Azure Traffic Manager",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "454",
            "sourceAddressPrefix": "AzureTrafficManager",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 800,
            "direction": "Inbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "IntersubnetCommunicationOutbound",
          "properties": {
            "description": "Intersubnet communication within virtual network",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "*",
            "sourceAddressPrefix": "172.20.54.0/25",
            "destinationAddressPrefix": "172.20.54.0/25",
            "access": "Allow",
            "priority": 100,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "AccessAzureCacheForRedisOutbound",
          "properties": {
            "description": "For ISE to work with Azure Cache for Redis",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "6379-6383",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "VirtualNetwork",
            "access": "Allow",
            "priority": 200,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "AzureActiveDirectory",
          "properties": {
            "description": "Azure Active Directory",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "AzureActiveDirectory",
            "access": "Allow",
            "priority": 300,
            "direction": "Outbound",
            "destinationPortRanges": [
              "80",
              "443"
            ],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "AzureStorageDependency",
          "properties": {
            "description": "Azure Storage dependency",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "Storage",
            "access": "Allow",
            "priority": 400,
            "direction": "Outbound",
            "destinationPortRanges": [
              "80",
              "443",
              "445"
            ],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Outbound-AppService",
          "properties": {
            "description": "Outbound App Service",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "443",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "AppService",
            "access": "Allow",
            "priority": 500,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Outbound-AzureMonitor",
          "properties": {
            "description": "Outbound Azure Monitor",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "AzureMonitor",
            "access": "Allow",
            "priority": 600,
            "direction": "Outbound",
            "destinationPortRanges": [
              "443",
              "1886"
            ],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        },
        {
          "name": "Outbound-EventHub",
          "properties": {
            "description": "Outbound Event Hub",
            "protocol": "*",
            "sourcePortRange": "*",
            "destinationPortRange": "5672",
            "sourceAddressPrefix": "VirtualNetwork",
            "destinationAddressPrefix": "EventHub",
            "access": "Allow",
            "priority": 700,
            "direction": "Outbound",
            "destinationPortRanges": [],
            "destinationApplicationSecurityGroups": [],
            "sourceApplicationSecurityGroups": [],
            "sourceAddressPrefixes": [],
            "destinationAddressPrefixes": [],
            "sourcePortRanges": []
          }
        }
      ]
    },
    "flowLogsDeloy": {
      "value": true
    },
    "flowLogsEnabled": {
      "value": true
    },
    "flowLogStorageAccountRGName": {
      "value": "rg-cpd-pltf-mon-npd-we-01"
    },
    "flowLogStorageAccountName": {
      "value": "stcpdpltfnsgflnpdwe01"
    },
    "workspaceRGName": {
      "value": "rg-cpd-pltf-mon-npd-we-01"
    },
    "workspaceName": {
      "value": "log-cpd-pltf-npd-we-01"
    },
    "NSGFlowsubscriptionid": {
      "value": "d0694def-b27e-4bb7-900d-437fbeb802da"
    },
    "diagnosticLogsRetentionInDays": {
      "value": 365
    },
    "lockForDeletion": {
      "value": false
    },
    "tags": {
      "value": {
        "Environment": "Development"
      }
    }
  }
  }